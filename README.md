내배캠 스파르타 타운 만들기 과제

시연영상
https://youtu.be/-qrW_PJuckM

트러블 슈팅
  1. 플레이어가 npc주변의 접근하면 대화창이 뜨도록 구현했는데, 대화가 끝나지 않았는데도 플레이어가 멀어졌다가 다시 가까워지면 대화창이 중복되는 문제
    원인 : 메서드의 중복 실행을 방지하는 코드가 없었다.
    해결 : 대화창을 npc의 자식으로 생성하고(npc가 많아져도 혼돈 가능성x), 자식 중 chatsystem컴포넌트를 가진 자식이 없을때만 동작하도록 구현.

  2. 미니게임 스택에서 홈화면UI가 나올 때 백그라운드로 게임의 화면을 띄어놓음, 그런데 홈화면UI에서도 게임이 플레이되는 문제가 발생함
    원인 : 게임을 띄우기 위해 start에서 게임이 실행되도록 함
    해결 : bool타입의 플래그를 통해 해결하려고 했다.
          그러나 이럴 경우 뒤에 블럭이 움직이지 않음
          그래서 플래그를 입력받는 곳에다만 적용시켰다.

  3. 카메라에 rigidbody2d와 collider를 추가해 이동시 border태그인 오브젝트에게 막히도록 구현함, 그런데 카메라가 벽에 붙은 상태에서 이동할 때 카메라 이동이 끊기는 것처럼 보이는 현상이 발생함
    원인 : border태그를 가진 오브젝트의 collider가 tilemap이여서 타일과 타일 사이에 카메라가 껴서 끊기는 현상이 발생함
    해결 : composite collider를 통해 타일들의 collider를 합쳐 끼지 않도록 해결함

  4. 마네킹의 스프라이트를 복제하는 것으로 플레이어의 스프라이트을 변경해 미니게임을 플레이하고 오면, 스프라이트가 변경전으로 돌아가는 현상 발생
    원인 : 플레이어 스프라이트를 메소드를 통해 스프라이트와 메소드에 직접 할당해 변경했는데 이 부분이 씬을 벗어나면 초기화 됨
    해결 : 싱글톤이 게임매니저의 플레이어 스프라이트와 메소드를 저장하고, 게임매니저가 씬을 이동해도 파괴되진 않도록 함
    새로운 문제 : 게임매니저의 저장은 되나 씬을 벗어나면, 저장된 스프라이트와 메소드가 씬에서 없어지므로 연결이 해제됨
    해결 : 스프라이트를 저장하는 것이 아니라 프리팹을 저장하는 것으로 변경. 마네킹에 마네킹이 연결된 프리팹의 정보를 저장하고, 플레이어가 선택하면 프리팹을 자식으로 생성하고(이미 존재하다면 삭제), 프리팹을 게임매니저의 저장했다.
  
  5. OnTriggerStay2D에서 GetKeyDown을 통해 입력을 받았는데, 입력을 못받는 상황이 발생
    원인 : OnTriggerStay2D는 Update만큼 자주 호출되는게아니라, OnTriggerStay2D가 호출되진 않았을 때 GetKeyDown이 호출되는 경우가 있었다.
    해결 : OnTriggerStay2D기 아니라 OnTriggerEnter2D와 OnTriggerExit2D를 통해 플래그를 관리하고, update를 통해 입력을 받았다.
